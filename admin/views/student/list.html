<div ng-include="'views/common/weixin-bind-modal.html'"/>
<div ng-include="'views/student/detail.html'"/>
<div ng-include="'views/module/pageInfo.html'"/>

<div class="row" ng-controller="StudentListController">
    <input id="model" hidden="true"
           value="{{$state.$current.data.model}}">

    <div class="col-md-12">
        <div class="portlet light">
            <div class="portlet-title tabbable-line">
                <ul class="nav nav-tabs ">
                    <li>
                        <a href="#" data-ng-click="setStatus('-2')" data-target="#student-tab" data-toggle="tab">退出</a>
                    </li>
                    <li class="active">
                        <a href="#" data-ng-click="setStatus('-1')" data-target="#student-tab"
                           data-toggle="tab">报名 <span
                                class="badge  badge-danger">{{studentNum['-1']}}</span></a>
                    </li>
                    <li>
                        <a href="#" data-ng-click="setStatus('0')" data-target="#student-tab" data-toggle="tab">正式</a>
                    </li>
                    <li>
                        <a href="#" data-ng-click="setStatus('1')" data-target="#student-tab" data-toggle="tab">科目一</a>
                    </li>
                    <li>
                        <a href="#" data-ng-click="setStatus('2')" data-target="#student-tab" data-toggle="tab">科目二</a>
                    </li>
                    <li>
                        <a href="#" data-ng-click="setStatus('3')" data-target="#student-tab" data-toggle="tab">科目三</a>
                    </li>
                    <li>
                        <a href="#" data-ng-click="setStatus('4')" data-target="#student-tab" data-toggle="tab">科目四</a>
                    </li>
                    <li>
                        <a href="#" data-ng-click="setStatus('5')" data-target="#student-tab" data-toggle="tab">毕业</a>
                    </li>
                    <li>
                        <a href="#" data-ng-click="setStatus('6')" data-target="#tab_conf" data-toggle="tab">配置</a>
                    </li>
                </ul>
            </div>
            <div class="portlet-body">
                <div class="alert alert-danger" ng-show="errorShow" ng-bind="showMsg">
                    <button class="close" data-close="alert"></button>
                </div>
                <div class="alert alert-success" ng-show="successShow" ng-bind="showMsg">
                    <button class="close" data-close="alert"></button>
                </div>
                <div class="tab-content">
                    <div class="tab-pane active" id="student-tab">
                        <div class="table-container">
                            <div class="table-actions-wrapper ">
                                <div style="margin-left: 5px">
                                    <select class="table-group-action-input form-control input-inline input-small input-sm">
                                        <option value="">批量操作</option>
                                        <option value="delete">删除</option>
                                    </select>
                                    <button class="btn btn-sm yellow table-group-action-submit">提交 <i
                                            class="fa fa-check"></i>
                                    </button>
                                </div>
                            </div>
                            <div ng-include="'views/student/search-bar.html'" ng-controller="ListController"/>
                            <table class="table table-striped table-bordered table-hover" id="list-table">
                            </table>
                        </div>
                    </div>
                    <div class="tab-pane" id="tab_conf">
                        <div ng-include="'views/student/conf.html'" ng-controller="StudentListController"/>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div ng-if="rootData.info" ng-include="'views/common/info-modal.html'" ng-controller="InfoController"/>
<script>
    /**
     * 设置推荐费支付
     */
    function inPay(id) {
        // 发送费推荐
        $.get(Metronic.rootPath() + "/index.php?s=/addon/Student/Student/inPay/student_id/" + id, function (data) {
            // 返回成功，关闭当前窗口，刷新列表
            if (data.result) {
                TableAjax.reload('list');
            }

            // 返回失败，显示错误信息
            else {
                alert(data.message);
            }
        });
    }
</script>